# 血常规指标分析AI工具

一个专为ITP（特发性血小板减少性紫癜）患者设计的智能血常规分析工具，提供血常规指标分析、图片识别和历史对比功能。

## 🚀 功能特性

### 核心功能
- **手动输入分析**: 支持手动输入血常规数据，进行智能分析
- **图片识别**: 上传血常规报告图片，自动识别各项指标
- **历史对比**: 对比多次检测结果，分析趋势变化
- **ITP专项评估**: 专门针对ITP患者的血小板相关指标分析

### 技术特点
- **智能分析**: 基于医学知识库的智能指标分析
- **风险评估**: 自动评估出血风险和血小板状态
- **专业建议**: 提供基于分析结果的健康建议
- **趋势跟踪**: 可视化展示指标变化趋势

## 🛠️ 技术架构

### 后端技术栈
- **FastAPI**: 高性能Python Web框架
- **OpenCV + Tesseract**: 图像处理和OCR识别
- **SQLite**: 轻量级数据存储
- **Pandas + NumPy**: 数据分析和处理

### 前端技术栈
- **React 18**: 现代化前端框架
- **TypeScript**: 类型安全的JavaScript
- **Tailwind CSS**: 实用优先的CSS框架
- **Recharts**: 数据可视化图表库
- **Lucide React**: 现代化图标库

## 📦 安装部署

### 系统要求
- Python 3.8+
- Node.js 16+
- OpenCV
- Tesseract OCR

### 快速开始

#### 方法1: 使用启动脚本（推荐）
```bash
# 克隆项目
git clone <repository-url>
cd xiangmuc

# 启动系统
./start_system.sh
```

#### 方法2: 手动启动

1. **安装后端依赖**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

2. **启动后端服务**
```bash
python app.py
```

3. **安装前端依赖**
```bash
cd frontend
npm install
```

4. **启动前端服务**
```bash
npm start
```

## 🌐 访问地址

- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

## 📱 使用指南

### 1. 手动输入分析
1. 在"手动输入分析"页面输入血常规数据
2. 系统自动分析各项指标
3. 查看分析结果和ITP专项评估
4. 获取专业建议和注意事项

### 2. 图片识别
1. 在"图片识别"页面上传血常规报告图片
2. 填写患者信息和检测日期
3. 系统自动识别图片中的指标数据
4. 查看识别结果和分析报告

### 3. 历史对比
1. 在"历史对比"页面查看所有检测记录
2. 选择要对比的报告
3. 分析指标变化趋势
4. 识别异常变化和风险点

## 🔧 API接口

### 核心接口
- `POST /api/analyze`: 血常规数据分析
- `POST /api/upload-report`: 上传血常规报告图片
- `GET /api/reports`: 获取所有报告
- `GET /api/reports/compare/{id}`: 历史数据对比

### 数据格式
```json
{
  "blood_test": {
    "patient_id": "patient_001",
    "test_date": "2024-01-15",
    "plt": 85,
    "hgb": 135,
    "wbc": 6.2
  },
  "analysis_type": "comprehensive"
}
```

## 📊 支持的血常规指标

### 血细胞计数
- 白细胞计数 (WBC)
- 红细胞计数 (RBC)
- 血小板计数 (PLT)

### 红细胞相关
- 血红蛋白 (HGB)
- 红细胞压积 (HCT)
- 平均红细胞体积 (MCV)

### 白细胞分类
- 中性粒细胞
- 淋巴细胞
- 单核细胞
- 嗜酸性粒细胞
- 嗜碱性粒细胞

## 🎯 ITP专项分析

### 血小板状态评估
- **正常**: ≥150 ×10^9/L
- **轻度减少**: 100-149 ×10^9/L
- **中度减少**: 50-99 ×10^9/L
- **严重减少**: <50 ×10^9/L

### 出血风险评估
- **极低风险**: 血小板正常
- **低风险**: 轻度减少
- **中等风险**: 中度减少
- **高风险**: 严重减少

## ⚠️ 重要声明

**本工具仅供参考，不能替代专业医疗诊断。如有任何健康疑虑或症状，请及时就医咨询专业血液科医生。**

ITP患者需要：
- 定期监测血小板计数
- 在医生指导下调整治疗方案
- 注意观察出血症状
- 避免剧烈运动和创伤

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 提交代码
4. 创建Pull Request

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者

---

**让AI技术为ITP患者的健康管理提供更好的支持！** 🩸💪
